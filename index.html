<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Valentine</title>

<style>
:root{
  --pink:#ff2e63;
  --pink2:#ff6b9a;
  --deep:#7a0030;
}

html,body{height:100%;margin:0;font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;}
body{
  overflow:hidden;
  display:grid;
  place-items:center;
  position:relative;

  /* nicer romantic background */
  background:
    radial-gradient(900px 600px at 15% 15%, rgba(255,255,255,.28), transparent 60%),
    radial-gradient(900px 600px at 85% 20%, rgba(255,255,255,.16), transparent 60%),
    radial-gradient(1100px 700px at 50% 90%, rgba(255,255,255,.14), transparent 65%),
    linear-gradient(135deg, #ff2e63 0%, #ff6b9a 35%, #ff3b73 70%, #ff9bbd 100%);
  background-size: 140% 140%;
  animation: bgMove 12s ease-in-out infinite alternate;
}

@keyframes bgMove{
  from{ background-position: 0% 10%; }
  to{ background-position: 100% 90%; }
}

/* Falling CSS hearts */
.hearts{position:absolute; inset:0; pointer-events:none; overflow:hidden; z-index:0;}
.heart{
  position:absolute; top:-10vh;
  width:16px; height:16px;
  background: rgba(255,255,255,.9);
  transform: rotate(45deg);
  animation: fall linear infinite;
  opacity:.75;
  filter: drop-shadow(0 12px 26px rgba(0,0,0,.20));
}
.heart:before,.heart:after{
  content:"";
  position:absolute;
  width:16px; height:16px;
  background: rgba(255,255,255,.9);
  border-radius:50%;
}
.heart:before{ top:-8px; left:0; }
.heart:after{ left:-8px; top:0; }

@keyframes fall{
  from{ transform: translateY(0) translateX(0) rotate(45deg); opacity:0; }
  12%{ opacity:.85; }
  to{ transform: translateY(115vh) translateX(var(--drift)) rotate(var(--rot)); opacity:0; }
}

/* Card */
.card{
  width:min(580px, 92vw);
  padding: 46px 30px 30px;
  border-radius: 28px;
  background: rgba(255,255,255,.16);
  backdrop-filter: blur(16px);
  box-shadow: 0 22px 90px rgba(0,0,0,.24);
  border: 1px solid rgba(255,255,255,.28);
  text-align:center;
  position:relative;
  z-index:2;
}

/* Title animation */
h1{
  margin: 0 0 18px;
  font-size: clamp(28px, 4.2vw, 44px);
  color: rgba(255,255,255,.96);
  position:relative;

  opacity:0;
  transform: translateY(12px) scale(.985);
  animation:
    titleIn .95s cubic-bezier(.2,.9,.2,1) forwards,
    titleFloat 4.8s ease-in-out 1.2s infinite;
  text-shadow: 0 18px 55px rgba(0,0,0,.24);
}

@keyframes titleIn{
  0%{ opacity:0; transform: translateY(14px) scale(.98); filter: blur(1px); }
  70%{ opacity:1; transform: translateY(-2px) scale(1.01); filter: blur(0); }
  100%{ opacity:1; transform: translateY(0) scale(1); }
}
@keyframes titleFloat{
  0%,100%{ transform: translateY(0) scale(1); }
  50%{ transform: translateY(-2px) scale(1.002); }
}

/* Stage */
.stage{
  position:relative;
  height: 160px;
  border-radius: 18px;
  background: rgba(255,255,255,.14);
  border: 1px solid rgba(255,255,255,.22);
  overflow:hidden;
}

/* Buttons */
.btn{
  position:absolute;
  top:50%;
  transform: translate(-50%, -50%);
  padding: 14px 26px;
  border-radius: 999px;
  border: none;
  cursor:pointer;
  font-size: 16px;
  font-weight: 800;
  box-shadow: 0 16px 40px rgba(0,0,0,.24);
  transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
  user-select:none;
  -webkit-tap-highlight-color: transparent;
}

#yes{
  left: 36%;
  background: linear-gradient(135deg, rgba(255,255,255,.96), rgba(255,255,255,.78));
  color: var(--deep);
}
#yes:hover{ filter: brightness(1.03); box-shadow: 0 20px 48px rgba(0,0,0,.28); }

#no{
  left: 72%;
  background: rgba(255,255,255,.12);
  color: rgba(255,255,255,.92);
  border: 1px solid rgba(255,255,255,.35);

  /* IMPORTANT: now it IS clickable by default,
     but we will dodge only when pointer gets close */
  pointer-events: auto;
}

/* Small heart overlay after YES (center) */
.final{
  position:fixed;
  inset:0;
  display:none;
  place-items:center;
  z-index:10;
  background: transparent;
}
.final.show{ display:grid; }

.finalHeartWrap{
  width:min(42vmin, 260px);
  height:min(42vmin, 260px);
  position:relative;
  transform: scale(.7);
  animation: pop .36s cubic-bezier(.2,.9,.2,1) forwards;
  filter: drop-shadow(0 22px 80px rgba(0,0,0,.35));
}

@keyframes pop{
  to{ transform: scale(1); }
}

.finalHeart{
  width:100%;
  height:100%;
  background: rgba(255,255,255,.95);
  transform: rotate(45deg);
  border-radius: 18%;
  position:absolute;
  left:50%;
  top:50%;
  translate:-50% -50%;
  animation: pulse 1s ease-in-out infinite alternate;
}
.finalHeart:before,.finalHeart:after{
  content:"";
  position:absolute;
  width:100%;
  height:100%;
  background: rgba(255,255,255,.95);
  border-radius:50%;
}
.finalHeart:before{ top:-50%; left:0; }
.finalHeart:after{ left:-50%; top:0; }

@keyframes pulse{
  from{ transform: rotate(45deg) scale(1.00); }
  to{ transform: rotate(45deg) scale(1.05); }
}

.finalText{
  position:absolute;
  left:50%;
  top:50%;
  translate:-50% -50%;
  color: var(--deep);
  font-weight: 950;
  letter-spacing: .10em;
  font-size: clamp(26px, 5.6vmin, 44px);
  text-transform: uppercase;
  text-shadow: 0 14px 40px rgba(0,0,0,.18);
  z-index:2;
  transform: rotate(-45deg);
}
</style>
</head>

<body>
  <div class="hearts" id="hearts"></div>

  <div class="card" id="card">
    <h1>Do you wanna be my Valentine?</h1>

    <div class="stage" id="stage">
      <button class="btn" id="yes" type="button">YES</button>
      <button class="btn" id="no" type="button">NO</button>
    </div>
  </div>

  <div class="final" id="final">
    <div class="finalHeartWrap">
      <div class="finalHeart"></div>
      <div class="finalText">J+M</div>
    </div>
  </div>

<script>
/* Falling hearts */
const heartsWrap = document.getElementById('hearts');
const HEART_COUNT = 34;
for (let i = 0; i < HEART_COUNT; i++) {
  const h = document.createElement('div');
  h.className = 'heart';
  h.style.left = Math.random()*100 + 'vw';
  h.style.animationDuration = (8 + Math.random()*9) + 's';
  h.style.animationDelay = (-Math.random()*9) + 's';
  h.style.setProperty('--drift', (Math.random()*160 - 80) + 'px');
  h.style.setProperty('--rot', (Math.random()*180 - 90) + 'deg');
  heartsWrap.appendChild(h);
}

const stage = document.getElementById('stage');
const noBtn = document.getElementById('no');
const yesBtn = document.getElementById('yes');
const card = document.getElementById('card');
const final = document.getElementById('final');

/* NO only dodges when you try to go on it (near/hover),
   not by itself. */
function relocateNo(farFromX, farFromY){
  const pad = 8;
  const s = stage.getBoundingClientRect();
  const b = noBtn.getBoundingClientRect();

  const minX = pad, maxX = s.width - b.width - pad;
  const minY = pad, maxY = s.height - b.height - pad;

  let best = null;
  for(let i=0;i<30;i++){
    const x = minX + Math.random()*(maxX-minX);
    const y = minY + Math.random()*(maxY-minY);
    const dx = (x + b.width/2) - farFromX;
    const dy = (y + b.height/2) - farFromY;
    const dist = Math.hypot(dx, dy);
    if(!best || dist > best.dist) best = {x,y,dist};
  }

  noBtn.style.left = (best.x + b.width/2) + 'px';
  noBtn.style.top  = (best.y + b.height/2) + 'px';
}

function cursorPosInStage(e){
  const s = stage.getBoundingClientRect();
  const x = (e.clientX ?? (e.touches?.[0]?.clientX || 0)) - s.left;
  const y = (e.clientY ?? (e.touches?.[0]?.clientY || 0)) - s.top;
  return {x,y};
}

stage.addEventListener('pointermove', (e)=>{
  const p = cursorPosInStage(e);
  const b = noBtn.getBoundingClientRect();
  const s = stage.getBoundingClientRect();
  const noCenterX = (b.left - s.left) + b.width/2;
  const noCenterY = (b.top  - s.top ) + b.height/2;

  const dist = Math.hypot(p.x - noCenterX, p.y - noCenterY);

  // only dodge when you get close (feels like "only when you try")
  if(dist < 120){
    relocateNo(p.x, p.y);
  }
}, {passive:true});

// Also dodge on hover directly (desktop)
noBtn.addEventListener('mouseenter', (e)=>{
  const s = stage.getBoundingClientRect();
  relocateNo(s.width/2, s.height/2);
});

// Initial position
requestAnimationFrame(()=>{
  noBtn.style.left = '72%';
  noBtn.style.top = '50%';
});

/* YES: show small heart + push */
let locked = false;
yesBtn.addEventListener('click', async ()=>{
  if(locked) return;
  locked = true;

  // hide buttons, keep background/card invisible for clean look
  card.style.display = 'none';
  final.classList.add('show');

  // Real push to your phone via ntfy
  // -> ntfy app installieren und Topic abonnieren:
  //    valentine-olli-01608347263
  const NTFY_TOPIC = "valentine-olli-01608347263";
  try{
    await fetch("https://ntfy.sh/" + NTFY_TOPIC, {
      method: "POST",
      headers: {
        "Title": "Valentine",
        "Priority": "5",
        "Tags": "heart"
      },
      body: "Sie hat JA geklickt."
    });
  }catch(err){
    // ignore
  }
});
</script>
</body>
</html>
