<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Valentine</title>

<style>
:root{
  --pink:#ff2e63;
  --soft:#ffe3ee;
  --deep:#b0003a;
}

html,body{height:100%;margin:0;font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;}
body{
  overflow:hidden;
  background: linear-gradient(180deg, #fff 40%, var(--soft) 100%);
  display:grid;
  place-items:center;
  position:relative;
}

/* Falling CSS hearts */
.hearts{position:absolute; inset:0; pointer-events:none; overflow:hidden;}
.heart{
  position:absolute; top:-10vh;
  width:16px; height:16px;
  background: var(--pink);
  transform: rotate(45deg);
  animation: fall linear infinite;
  opacity:.85;
}
.heart:before,.heart:after{
  content:"";
  position:absolute;
  width:16px; height:16px;
  background: var(--pink);
  border-radius:50%;
}
.heart:before{ top:-8px; left:0; }
.heart:after{ left:-8px; top:0; }

@keyframes fall{
  from{ transform: translateY(0) translateX(0) rotate(45deg); opacity:0; }
  10%{ opacity:.9; }
  to{ transform: translateY(115vh) translateX(var(--drift)) rotate(var(--rot)); opacity:0; }
}

.card{
  width:min(560px, 92vw);
  padding: 42px 30px 30px;
  border-radius: 26px;
  background: rgba(255,255,255,.92);
  backdrop-filter: blur(10px);
  box-shadow: 0 18px 60px rgba(0,0,0,.12);
  border: 1px solid rgba(255,255,255,.85);
  text-align:center;
  position:relative;
  z-index:2;
}

h1{
  margin: 0 0 18px;
  font-size: clamp(28px, 4.2vw, 44px);
  color: var(--deep);
}

.stage{
  position:relative;
  height: 150px;
  border-radius: 18px;
  background: rgba(255,255,255,.55);
  border: 1px solid rgba(255,255,255,.7);
  overflow:hidden;
}

/* Buttons */
.btn{
  position:absolute;
  top:50%;
  transform: translate(-50%, -50%);
  padding: 14px 26px;
  border-radius: 999px;
  border: none;
  cursor:pointer;
  font-size: 16px;
  font-weight: 750;
  box-shadow: 0 12px 30px rgba(0,0,0,.12);
  transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
  user-select:none;
  -webkit-tap-highlight-color: transparent;
}

#yes{
  left: 36%;
  background: linear-gradient(135deg, #ff2e63, #ff6b9a);
  color: #fff;
}
#yes:hover{ filter: brightness(1.03); box-shadow: 0 16px 38px rgba(0,0,0,.16); }

#no{
  left: 72%;
  background: #fff;
  color: var(--deep);
  border: 1px solid #ff6b9a;

  /* ABSOLUT NIE KLICKBAR */
  pointer-events: none;
}

/* Fullscreen final heart overlay */
.final{
  position:fixed;
  inset:0;
  display:none;
  place-items:center;
  z-index:10;
  background: radial-gradient(1200px 600px at 50% 20%, rgba(255,255,255,.35), transparent 60%),
              linear-gradient(180deg, #fff 0%, var(--soft) 100%);
}

.final.show{ display:grid; }

.finalHeartWrap{
  width:min(82vmin, 520px);
  height:min(82vmin, 520px);
  position:relative;
  transform: scale(.6);
  animation: pop .35s ease-out forwards;
}

@keyframes pop{
  to{ transform: scale(1); }
}

.finalHeart{
  width:100%;
  height:100%;
  background: var(--pink);
  transform: rotate(45deg);
  border-radius: 18%;
  position:absolute;
  left:50%;
  top:50%;
  translate:-50% -50%;
  box-shadow: 0 22px 80px rgba(0,0,0,.22);
  animation: pulse 1s ease-in-out infinite alternate;
}
.finalHeart:before,.finalHeart:after{
  content:"";
  position:absolute;
  width:100%;
  height:100%;
  background: var(--pink);
  border-radius:50%;
}
.finalHeart:before{ top:-50%; left:0; }
.finalHeart:after{ left:-50%; top:0; }

@keyframes pulse{
  from{ transform: rotate(45deg) scale(1.00); }
  to{ transform: rotate(45deg) scale(1.05); }
}

.finalText{
  position:absolute;
  left:50%;
  top:50%;
  translate:-50% -50%;
  color:#fff;
  font-weight: 900;
  letter-spacing: .08em;
  font-size: clamp(34px, 7vmin, 64px);
  text-transform: uppercase;
  text-shadow: 0 12px 40px rgba(0,0,0,.28);
  z-index:2;
  transform: rotate(-45deg);
}
</style>
</head>

<body>
  <div class="hearts" id="hearts"></div>

  <div class="card" id="card">
    <h1>Do you wanna be my Valentine?</h1>

    <div class="stage" id="stage">
      <button class="btn" id="yes" type="button">YES</button>
      <button class="btn" id="no" type="button">NO</button>
    </div>
  </div>

  <div class="final" id="final">
    <div class="finalHeartWrap">
      <div class="finalHeart"></div>
      <div class="finalText">M+J</div>
    </div>
  </div>

<script>
/* Falling hearts */
const heartsWrap = document.getElementById('hearts');
const HEART_COUNT = 34;
for (let i = 0; i < HEART_COUNT; i++) {
  const h = document.createElement('div');
  h.className = 'heart';
  h.style.left = Math.random()*100 + 'vw';
  h.style.animationDuration = (8 + Math.random()*9) + 's';
  h.style.animationDelay = (-Math.random()*9) + 's';
  h.style.setProperty('--drift', (Math.random()*160 - 80) + 'px');
  h.style.setProperty('--rot', (Math.random()*180 - 90) + 'deg');
  heartsWrap.appendChild(h);
}

const stage = document.getElementById('stage');
const noBtn = document.getElementById('no');
const yesBtn = document.getElementById('yes');
const card = document.getElementById('card');
const final = document.getElementById('final');

/* Make NO basically impossible: it also has pointer-events:none (so never clickable). */
function relocateNo(farFromX, farFromY){
  const pad = 8;
  const s = stage.getBoundingClientRect();
  const b = noBtn.getBoundingClientRect();

  const minX = pad, maxX = s.width - b.width - pad;
  const minY = pad, maxY = s.height - b.height - pad;

  let best = null;
  for(let i=0;i<40;i++){
    const x = minX + Math.random()*(maxX-minX);
    const y = minY + Math.random()*(maxY-minY);
    const dx = (x + b.width/2) - farFromX;
    const dy = (y + b.height/2) - farFromY;
    const dist = Math.hypot(dx, dy);
    if(!best || dist > best.dist) best = {x,y,dist};
  }

  noBtn.style.left = (best.x + b.width/2) + 'px';
  noBtn.style.top  = (best.y + b.height/2) + 'px';
}

function cursorPosInStage(e){
  const s = stage.getBoundingClientRect();
  const x = (e.clientX ?? (e.touches?.[0]?.clientX || 0)) - s.left;
  const y = (e.clientY ?? (e.touches?.[0]?.clientY || 0)) - s.top;
  return {x,y};
}

// Extra aggressive dodge radius + also on touchmove
function dodge(e){
  const p = cursorPosInStage(e);
  const b = noBtn.getBoundingClientRect();
  const s = stage.getBoundingClientRect();
  const noCenterX = (b.left - s.left) + b.width/2;
  const noCenterY = (b.top  - s.top ) + b.height/2;

  const dist = Math.hypot(p.x - noCenterX, p.y - noCenterY);
  if(dist < 260){
    relocateNo(p.x, p.y);
  }
}

stage.addEventListener('pointermove', dodge, {passive:true});
stage.addEventListener('touchmove', dodge, {passive:true});
// Also reposition periodically so it never “sits still”
setInterval(()=>{
  const s = stage.getBoundingClientRect();
  relocateNo(s.width/2, s.height/2);
}, 650);

// Initial place
requestAnimationFrame(()=>{
  noBtn.style.left = '72%';
  noBtn.style.top = '50%';
});

/* YES: full-screen heart + notifications */
let locked = false;
yesBtn.addEventListener('click', async ()=>{
  if(locked) return;
  locked = true;

  // Hide card, show final heart
  card.style.display = 'none';
  final.classList.add('show');

  // 1) Push to your phone via ntfy (recommended)
  // -> Install "ntfy" app on your phone and subscribe to this topic:
  //    valentine-olli-01608347263   (you can rename it)
  const NTFY_TOPIC = "valentine-olli-01608347263";
  try{
    await fetch("https://ntfy.sh/" + NTFY_TOPIC, {
      method: "POST",
      headers: {
        "Title": "Valentine",
        "Priority": "5",
        "Tags": "heart"
      },
      body: "Sie hat JA geklickt."
    });
  }catch(err){
    // ignore (e.g., blocked offline)
  }

  // 2) WhatsApp fallback (she may need to tap send)
  const msg = encodeURIComponent("Ich habe YES geklickt.");
  const waUrl = "https://wa.me/491608347263?text=" + msg;
  window.open(waUrl, "_blank");
});
</script>
</body>
</html>

